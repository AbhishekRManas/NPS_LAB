#include<stdio.h>

struct node
{
    int dist[20];
    int from[20];
};

typedef struct node Node;

Node graph[20];
int cost[20][20];

int main()
{
    //-------------------------------------------------------------------------------------------------
    //  > Number of nodes
    //-------------------------------------------------------------------------------------------------
        int n;

        printf("Enter the number of nodes: ");
        scanf("%d", &n);
    //-------------------------------------------------------------------------------------------------
    //  > Cost matrix
    //-------------------------------------------------------------------------------------------------
        printf("Enter the cost matrix: \n");

        for(int i = 0; i < n; i++)
        {
            for(int j = 0; j < n; j++)
            {
                scanf("%d", &cost[i][j]);
                cost[i][i] = 0;

                graph[i].dist[j] = cost[i][j];
                graph[i].from[j] = j;
            }
        }
    //-------------------------------------------------------------------------------------------------
    //  > Bellman
    //-------------------------------------------------------------------------------------------------
    int count = 0;

    do
    {
        count = 0;
        for(int i = 0; i < n; i++)
        {
            for(int j = 0; j < n; j++)
            {
                for(int k = 0; k < n; k++)
                {   
                    if(graph[i].dist[j] > cost[i][k] + graph[k].dist[j])
                    {
                        graph[i].dist[j] = cost[i][k] + graph[k].dist[j];
                        graph[i].from[j] = k;
                        count++;
                    }
                }
            }
        }
    } while(count != 0);
        
    //-------------------------------------------------------------------------------------------------
    //  > Printing the result
    //-------------------------------------------------------------------------------------------------
        for(int i = 0; i < n; i++)
        {
            printf("From router : %d\n", i+1);

            for(int j = 0; j < n; j++)
            {
                printf("To reach %d next hop is to %d and distance is %d\n", j+1, graph[i].from[j], graph[i].dist[j]);
            }
        }
    //-------------------------------------------------------------------------------------------------
}