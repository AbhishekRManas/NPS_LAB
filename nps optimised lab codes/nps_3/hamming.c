#include<stdio.h>

int main()
{
    //-----------------------------------------------------------------------------------------
    //  > Enoding the data bits + parity bits (even parity):
    //-----------------------------------------------------------------------------------------
        int data[8];

        printf("Enter four data bits: ");
        scanf("%d", &data[3]);
        scanf("%d", &data[5]);
        scanf("%d", &data[6]);
        scanf("%d", &data[7]);

        data[1] = (data[3]+data[5]+data[7]) % 2;
        data[2] = (data[3]+data[6]+data[7]) % 2;
        data[4] = (data[5]+data[6]+data[7]) % 2;

        printf("Encoded data is : ");
        for(int i = 1; i <= 7; i++)
            printf("%d ", data[i]);
        printf("\n");
    //-----------------------------------------------------------------------------------------
    //  > Data received
    //-----------------------------------------------------------------------------------------
        int recv[8];

        printf("Received data is : ");
        for(int i = 1; i <= 7; i++)
            scanf("%d", &recv[i]);
    //-----------------------------------------------------------------------------------------
    //  > Detecting the error:
    //-----------------------------------------------------------------------------------------
        int C0 = (recv[1]+recv[3]+recv[5]+recv[7])%2;
        int C1 = (recv[2]+recv[3]+recv[6]+recv[7])%2;
        int C2 = (recv[4]+recv[5]+recv[6]+recv[7])%2;

        int pos = 4*C2 + 2*C1 + 1*C0;

        if(pos != 0)
            printf("Error is at the position : %d\n", pos);
        else 
            printf("No error is found..\n");
    //-----------------------------------------------------------------------------------------
    //  > Correcting the error:
    //-----------------------------------------------------------------------------------------
        if(recv[pos] == 1)
            recv[pos] = 0;
        else
            recv[pos] = 1;
    //-----------------------------------------------------------------------------------------
    //  > Corrected data:
    //-----------------------------------------------------------------------------------------
        printf("Corrected data is : ");
        for(int i = 1; i <= 7; i++)
            printf("%d ", recv[i]);
        printf("\n");
    //-----------------------------------------------------------------------------------------







}